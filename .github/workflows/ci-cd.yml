# 文件路径：.github/workflows/ci-cd.yml

name: Flask App CI/CD Pipeline

# 定义何时触发这个工作流
on:
  push:
    branches:
      - main  # 当代码推送到 main 分支时触发

# 定义工作流中的所有任务 (Jobs)
jobs:
  # Job 1: 持续集成 (CI) 阶段
  build-and-test:
    name: CI - Build and Test
    runs-on: ubuntu-latest
    steps:
      # 步骤将在下一步详细讲解
      - name: 检出代码 (Checkout code)
        uses: actions/checkout@v4

      - name: 运行简单的构建和测试 (Run Build/Test)
        # TODO: 这里是您的构建和测试命令

  # Job 2: 持续部署 (CD) 阶段
  deploy:
    name: CD - Deploy to Docker
    # 这个部署任务必须在 CI 任务成功后才能运行
    needs: [build-and-test] 
    runs-on: ubuntu-latest
    steps:
      # 步骤将在下一步详细讲解
      - name: 登录 Docker Hub/Registry

      - name: 构建并推送 Docker 镜像
        # TODO: 这里是您的镜像构建和推送命令
